<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>æƒ…å¢ƒé¡Œåº«ç®¡ç†</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <!-- Header -->
  <header class="bg-white shadow p-4 flex justify-between items-center">
    <div>
      <h1 class="text-xl font-semibold">é’å°‘å¹´é˜²è©äº’å‹•å­¸ç¿’å¹³å°</h1>
      <p class="text-sm text-blue-600">æˆç‚ºç¶²è·¯å®‰å…¨å°é”äºº</p>
    </div>
    <div class="flex gap-4 items-center">
      <div class="text-sm text-blue-800 font-semibold">ğŸ‘¨â€ğŸ« æ•™å¸«</div>
      <a href="../home.html" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">ç™»å‡º</a>
    </div>
    <style>
      .badge { display:inline-block; border-radius:1rem; font-size:0.85em; padding:0.2em 0.8em; margin-right:0.5em;}
      .badge-hot { background:#fde047; color:#92400e;}
      .badge-risk-high { background:#fee2e2; color:#b91c1c;}
      .badge-risk-medium { background:#fef9c3; color:#ca8a04;}
      .badge-risk-low { background:#d1fae5; color:#065f46;}
      .selected { border:2px solid #2563eb; }
    </style>
  </header>
  <div class="flex min-h-[calc(100vh-64px)]">
    <!-- å´é‚Šæ¬„ -->
    <aside class="w-64 bg-white shadow-md p-4 flex-shrink-0">
      <h2 class="text-xl font-bold mb-6 text-blue-800">æ•™å¸«ç®¡ç†é¸å–®</h2>
      <nav class="space-y-2">
        <a href="index.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ§‘â€ğŸ« æ•™å¸«ç®¡ç†æ¨¡çµ„</a>
        <a href="dashboard.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ“Š å„€è¡¨æ¿</a>
        <a href="student.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ‘¥ å­¸ç”Ÿç®¡ç†</a>
        <a href="scenario.html" class="block px-4 py-2 rounded bg-blue-100 text-blue-900">ğŸ“š æƒ…å¢ƒé¡Œåº«ç®¡ç†</a>
        <a href="knowledge.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ“– çŸ¥è­˜åº«ç®¡ç†</a>
        <a href="achievement.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ† æˆå°±ç³»çµ±</a>
        <a href="notification.html" class="block px-4 py-2 rounded hover:bg-blue-100">ï¿½ï¿½ å…¬å‘Šç®¡ç†</a>
        <a href="settings.html" class="block px-4 py-2 rounded hover:bg-blue-100">âš™ï¸ è¨­å®šèˆ‡æ”¯æ´</a>
      </nav>
    </aside>
    <!-- ä¸»å…§å®¹å€ -->
  <!-- ä¸»å…§å®¹ -->
  <main class="flex-1 p-8">
      <h1 class="text-2xl font-bold mb-6">æƒ…å¢ƒé¡Œåº«ç®¡ç†</h1>
      <!-- ç¯©é¸èˆ‡æ“ä½œ -->
      <div class="flex flex-wrap gap-4 items-end mb-6">
          <div>
              <label class="block text-sm font-semibold mb-1">é¢¨éšªç­‰ç´š</label>
              <select id="riskFilter" class="border rounded px-3 py-2">
                  <option value="">å…¨éƒ¨</option>
                  <option value="high">é«˜é¢¨éšª</option>
                  <option value="medium">ä¸­é¢¨éšª</option>
                  <option value="low">ä½é¢¨éšª</option>
              </select>
          </div>
          <div>
              <label class="block text-sm font-semibold mb-1">ç†±é–€åº¦</label>
              <select id="popularityFilter" class="border rounded px-3 py-2">
                  <option value="">ä¸é™</option>
                  <option value="80">80â†‘</option>
                  <option value="60">60â†‘</option>
              </select>
          </div>
          <button onclick="selectAll()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">å…¨é¸</button>
          <button onclick="addToModule()" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">åŠ å…¥èª²ç¨‹é¡Œçµ„</button>
      </div>

      <!-- é¡Œåº«åˆ—è¡¨ -->
      <div id="questionList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"></div>

      <!-- æœ¬æ¬¡èª²ç¨‹é¡Œçµ„ -->
      <div class="mt-8 bg-blue-50 p-6 rounded">
          <h2 class="font-bold mb-4">æœ¬æ¬¡èª²ç¨‹é¡Œçµ„</h2>
          <div id="moduleList" class="space-y-2"></div>
      </div>
  </main>

  <script>
  // å‡è¨­å¾Œç«¯API: /api/questions æˆ– data/scams.json
  // å‡è³‡æ–™ç¯„ä¾‹
  const questions = [
      { id:1, title:"IGå‡å¸³è™ŸæŠ½ç", topic:"ç¤¾ç¾¤è©é¨™", risk:"high", popularity:92, desc:"å‡å†’åäººå¸³è™Ÿå‚³é€æŠ½çè¨Šæ¯...", },
      { id:2, title:"è³¼ç‰©ç¶²ç«™ä½åƒ¹é™·é˜±", topic:"ç¶²è³¼è©é¨™", risk:"medium", popularity:81, desc:"å½é€ è³¼ç‰©å¹³å°...", },
      { id:3, title:"AIæ·±å½èªéŸ³é¨™å®¶é•·", topic:"AIè©é¨™", risk:"high", popularity:75, desc:"è©é¨™é›†åœ˜ç”¨AIè®Šè²...", },
      { id:4, title:"æŠ•è³‡æš´åˆ©å»£å‘Š", topic:"å‡æŠ•è³‡", risk:"high", popularity:90, desc:"ç¤¾ç¾¤å‡ºç¾æŠ•è³‡é«˜å ±é…¬é€£çµ...", },
      { id:5, title:"SteaméŠæˆ²é»æ•¸è©é¨™", topic:"éŠæˆ²è©é¨™", risk:"medium", popularity:69, desc:"å‡è£æ˜¯æœ‹å‹ç´¢å–é»æ•¸åºè™Ÿ...", },
      { id:6, title:"å¸³è™Ÿé‡£é­šéƒµä»¶", topic:"é‡£é­šè©é¨™", risk:"low", popularity:55, desc:"æ”¶åˆ°å½é€ å®˜æ–¹é€šçŸ¥...", },
  ];

  let moduleQuestions = []; // èª²ç¨‹æ¨¡çµ„

  function renderQuestions() {
      const riskMap = { high: "badge-risk-high", medium: "badge-risk-medium", low: "badge-risk-low" };
      const riskName = { high: "é«˜é¢¨éšª", medium: "ä¸­é¢¨éšª", low: "ä½é¢¨éšª" };
      const list = document.getElementById('questionList');
      list.innerHTML = '';
      // ç¯©é¸
      const rf = document.getElementById('riskFilter').value;
      const pf = document.getElementById('popularityFilter').value;
      let filtered = questions.filter(q=>
          (!rf || q.risk===rf) && (!pf || q.popularity>=parseInt(pf))
      );
      // åˆ—è¡¨
      filtered.forEach(q=>{
          const checked = moduleQuestions.includes(q.id) ? 'checked disabled' : '';
          list.innerHTML += `
          <div class="bg-white p-4 rounded shadow flex flex-col border border-gray-200">
              <div class="mb-2">
                  <span class="badge ${riskMap[q.risk]}">${riskName[q.risk]}</span>
                  <span class="badge badge-hot">ğŸ”¥${q.popularity}</span>
                  <span class="ml-2 text-sm text-gray-500">#${q.topic}</span>
              </div>
              <div class="font-bold mb-2">${q.title}</div>
              <div class="text-gray-700 text-sm mb-2">${q.desc}</div>
              <div class="flex items-center justify-between">
                  <label class="flex items-center">
                      <input type="checkbox" class="mr-2 q-select" value="${q.id}" ${checked}>
                      åŠ å…¥æœ¬æ¬¡èª²ç¨‹
                  </label>
                  <button onclick="editQ(${q.id})" class="text-blue-600 hover:underline text-sm">ç·¨è¼¯</button>
                  <button onclick="delQ(${q.id})" class="text-red-600 hover:underline text-sm">åˆªé™¤</button>
              </div>
          </div>`;
      });
  }

  function selectAll() {
      document.querySelectorAll('.q-select:not(:disabled)').forEach(cb=>cb.checked=true);
  }
  function addToModule() {
      document.querySelectorAll('.q-select:checked').forEach(cb=>{
          const id = parseInt(cb.value);
          if(!moduleQuestions.includes(id)) moduleQuestions.push(id);
      });
      renderQuestions();
      renderModule();
  }
  function renderModule() {
      const el = document.getElementById('moduleList');
      el.innerHTML = '';
      moduleQuestions.forEach(id=>{
          const q = questions.find(x=>x.id===id);
          el.innerHTML += `
              <div class="bg-white rounded shadow p-3 flex justify-between items-center">
                  <div>
                      <span class="badge badge-hot">ğŸ”¥${q.popularity}</span>
                      <span class="font-bold">${q.title}</span>
                      <span class="text-sm text-gray-500 ml-2">#${q.topic}</span>
                      <span class="badge ${q.risk==='high'?'badge-risk-high':q.risk==='medium'?'badge-risk-medium':'badge-risk-low'} ml-2">${q.risk==='high'?'é«˜é¢¨éšª':q.risk==='medium'?'ä¸­é¢¨éšª':'ä½é¢¨éšª'}</span>
                  </div>
                  <button onclick="removeFromModule(${id})" class="text-red-500 hover:underline">ç§»é™¤</button>
              </div>`;
      });
  }
  function removeFromModule(id){
      moduleQuestions = moduleQuestions.filter(qid=>qid!==id);
      renderQuestions();
      renderModule();
  }
  // ç·¨è¼¯/åˆªé™¤ï¼ˆåƒ…DEMOï¼‰
  function editQ(id) { alert("ç·¨è¼¯é¡Œç›®ï¼š"+id); }
  function delQ(id) { 
      if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) {
          // è‹¥æƒ³åŒæ­¥å¾Œç«¯è«‹å¯«API
          let idx = questions.findIndex(q=>q.id===id);
          if(idx>-1) questions.splice(idx,1);
          renderQuestions();
          renderModule();
      }
  }

  // ç¯©é¸äº‹ä»¶
  document.addEventListener('DOMContentLoaded', ()=>{
      renderQuestions();
      document.getElementById('riskFilter').addEventListener('change', renderQuestions);
      document.getElementById('popularityFilter').addEventListener('change', renderQuestions);
  });
  </script>
</body>
</html>