<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <title>æƒ…å¢ƒé¡Œåº«ç®¡ç†</title>
  <script src="https://cdn.tailwindcss.com"></script>ï¼¦
  <style>
    .badge {
      display: inline-block;
      border-radius: 1rem;
      font-size: 0.85em;
      padding: 0.2em 0.8em;
      margin-right: 0.5em;
    }

    .badge-hot {
      background: #fde047;
      color: #92400e;
    }

    .badge-risk-high {
      background: #fee2e2;
      color: #b91c1c;
    }

    .badge-risk-medium {
      background: #fef9c3;
      color: #ca8a04;
    }

    .badge-risk-low {
      background: #d1fae5;
      color: #065f46;
    }

    .selected {
      border: 2px solid #2563eb;
    }
  </style>
  <style>
    :root {
      --header-height: 64px;
      --sidebar-width: 256px;
      /* 16rem = 256px */
    }

    body {
      background: #f3f4f6;
      min-height: 100vh;
      font-family: 'Noto Sans TC', 'sans-serif';
    }

    header.header-fixed {
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      z-index: 40;
      height: var(--header-height);
      background: #fff;
      box-shadow: 0 2px 8px #0001;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 1.5rem;
    }

    aside.sidebar-fixed {
      position: fixed;
      left: 0;
      top: var(--header-height);
      bottom: 0;
      width: var(--sidebar-width);
      z-index: 30;
      background: #fff;
      box-shadow: 2px 0 8px #0001;
      padding: 1rem;
      overflow-y: auto;
    }

    .main-content {
      margin-top: var(--header-height);
      margin-left: var(--sidebar-width);
      padding: 2rem;
      min-height: calc(100vh - var(--header-height));
      /* ç¢ºä¿å…§å®¹ä¸è¢«é®ä½ */
      transition: margin .2s;
    }

    @media (max-width: 900px) {
      aside.sidebar-fixed {
        width: 13rem;
      }

      .main-content {
        margin-left: 13rem;
      }
    }

    @media (max-width: 700px) {
      aside.sidebar-fixed {
        width: 100vw;
        position: static;
        box-shadow: none;
      }

      .main-content {
        margin-left: 0;
      }
    }
  </style>
  <style>
    .search-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
      background-color: #fff;
      border-radius: 24px;
      box-shadow: 0 1px 6px rgba(32, 33, 36, 0.28);
      min-width: 680px;
    }

    .search-input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 15px;
      padding: 10px;
      color: #333;
      height: 25px;
    }

    .search-icon {
      padding: 0 10px;
      cursor: pointer;

    }
  </style>
</head>

<body class="bg-gray-100 min-h-screen">
  <!-- å›ºå®š Header -->
  <header class="header-fixed">
    <div>
      <h1 class="text-xl font-semibold">é’å°‘å¹´é˜²è©äº’å‹•å­¸ç¿’å¹³å°</h1>
      <p class="text-sm text-blue-600">æˆç‚ºç¶²è·¯å®‰å…¨å°é”äºº</p>
    </div>
    <div class="flex gap-4 items-center">
      <div class="text-sm text-blue-800 font-semibold">ğŸ‘¨â€ğŸ« æ•™å¸«</div>
      <a href="../home.html" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">ç™»å‡º</a>
    </div>
  </header>
  <!-- å›ºå®šå´é‚Šæ¬„ -->
  <aside class="sidebar-fixed">
    <h2 class="text-xl font-bold mb-6 text-blue-800">æ•™å¸«ç®¡ç†é¸å–®</h2>
    <nav class="space-y-2">
      <a href="index.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ§‘â€ğŸ« æ•™å¸«ç®¡ç†æ¨¡çµ„</a>
      <a href="dashboard.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ“Š å„€è¡¨æ¿</a>
      <a href="student.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ‘¥ å­¸ç”Ÿç®¡ç†</a>
      <a href="scenario.html" class="block px-4 py-2 rounded bg-blue-100 text-blue-900">ğŸ“š æƒ…å¢ƒé¡Œåº«ç®¡ç†</a>
      <a href="knowledge.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ“– çŸ¥è­˜åº«ç®¡ç†</a>
      <a href="achievement.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ† æˆå°±ç³»çµ±</a>
      <a href="notification.html" class="block px-4 py-2 rounded hover:bg-blue-100">ğŸ“¢ å…¬å‘Šç®¡ç†</a>
      <a href="settings.html" class="block px-4 py-2 rounded hover:bg-blue-100">âš™ï¸ è¨­å®šèˆ‡æ”¯æ´</a>
    </nav>
  </aside>
  <!-- ä¸»å…§å®¹å€ -->
  <!-- ä¸»å…§å®¹ -->
  <div class="main-content">
    <main class="flex-1">
      <h1 class="text-2xl font-bold mb-6">æƒ…å¢ƒé¡Œåº«ç®¡ç†</h1>
      <!-- ç¯©é¸èˆ‡æ“ä½œ -->
      <div class="flex flex-wrap gap-4 items-end mb-6" style="display: flex;  align-items: center;">
        <div>
          <label class="block text-sm font-semibold mb-1">é¢¨éšªç­‰ç´š</label>
          <select id="riskFilter" class="border rounded px-3 py-2">
            <option value="">å…¨éƒ¨</option>
            <option value="high">é«˜é¢¨éšª</option>
            <option value="medium">ä¸­é¢¨éšª</option>
            <option value="low">ä½é¢¨éšª</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-semibold mb-1">ç†±é–€åº¦</label>
          <select id="popularityFilter" class="border rounded px-3 py-2">
            <option value="">ä¸é™</option>
            <option value="80">80â†‘</option>
            <option value="60">60â†‘</option>
          </select>
        </div>
        <div style="padding-top: 25px;">
          <button onclick="selectAll()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">å…¨é¸</button>
          <button onclick="addToModule()"
            class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">åŠ å…¥èª²ç¨‹é¡Œçµ„</button>
        </div>
        <div style="padding-top: 25px;">
          <div class="search-container">
            <span class="search-icon">ğŸ”</span>
            <input type="text" class="search-input" placeholder="è¼¸å…¥é—œéµå­—é€²è¡Œæœå°‹">
          </div>
        </div>


      </div>

      <!-- é¡Œåº«åˆ—è¡¨ -->
      <div id="questionList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4"></div>

      <!-- æœ¬æ¬¡èª²ç¨‹é¡Œçµ„ -->
      <div class="mt-8 bg-blue-50 p-6 rounded">
        <h2 class="font-bold mb-4">æœ¬æ¬¡èª²ç¨‹é¡Œçµ„</h2>
        <div id="moduleList" class="space-y-2"></div>
      </div>
    </main>
    <footer class="text-center p-4 bg-white shadow">Â© 2025 æ©Ÿå™¨äººæƒ³æ”¾å‡åœ˜éšŠã€‚ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚</footer>
    <script>
      // å‡è¨­å¾Œç«¯API: /api/questions æˆ– data/scams.json
      // å‡è³‡æ–™ç¯„ä¾‹
      const questions = [
        { id: 1, title: "IGå‡å¸³è™ŸæŠ½ç", topic: "ç¤¾ç¾¤è©é¨™", risk: "high", popularity: 92, desc: "å‡å†’åäººå¸³è™Ÿå‚³é€æŠ½çè¨Šæ¯...", },
        { id: 2, title: "è³¼ç‰©ç¶²ç«™ä½åƒ¹é™·é˜±", topic: "ç¶²è³¼è©é¨™", risk: "medium", popularity: 81, desc: "å½é€ è³¼ç‰©å¹³å°...", },
        { id: 3, title: "AIæ·±å½èªéŸ³é¨™å®¶é•·", topic: "AIè©é¨™", risk: "high", popularity: 75, desc: "è©é¨™é›†åœ˜ç”¨AIè®Šè²...", },
        { id: 4, title: "æŠ•è³‡æš´åˆ©å»£å‘Š", topic: "å‡æŠ•è³‡", risk: "high", popularity: 90, desc: "ç¤¾ç¾¤å‡ºç¾æŠ•è³‡é«˜å ±é…¬é€£çµ...", },
        { id: 5, title: "SteaméŠæˆ²é»æ•¸è©é¨™", topic: "éŠæˆ²è©é¨™", risk: "medium", popularity: 69, desc: "å‡è£æ˜¯æœ‹å‹ç´¢å–é»æ•¸åºè™Ÿ...", },
        { id: 6, title: "å¸³è™Ÿé‡£é­šéƒµä»¶", topic: "é‡£é­šè©é¨™", risk: "low", popularity: 55, desc: "æ”¶åˆ°å½é€ å®˜æ–¹é€šçŸ¥...", },
      ];

      let moduleQuestions = []; // èª²ç¨‹æ¨¡çµ„

      function renderQuestions() {
        const riskMap = { high: "badge-risk-high", medium: "badge-risk-medium", low: "badge-risk-low" };
        const riskName = { high: "é«˜é¢¨éšª", medium: "ä¸­é¢¨éšª", low: "ä½é¢¨éšª" };
        const list = document.getElementById('questionList');
        list.innerHTML = '';
        // ç¯©é¸
        const rf = document.getElementById('riskFilter').value;
        const pf = document.getElementById('popularityFilter').value;
        let filtered = questions.filter(q =>
          (!rf || q.risk === rf) && (!pf || q.popularity >= parseInt(pf))
        );
        // åˆ—è¡¨
        filtered.forEach(q => {
          const checked = moduleQuestions.includes(q.id) ? 'checked disabled' : '';
          list.innerHTML += `
          <div class="bg-white p-4 rounded shadow flex flex-col border border-gray-200">
              <div class="mb-2">
                  <span class="badge ${riskMap[q.risk]}">${riskName[q.risk]}</span>
                  <span class="badge badge-hot">ğŸ”¥${q.popularity}</span>
                  <span class="ml-2 text-sm text-gray-500">#${q.topic}</span>
              </div>
              <div class="font-bold mb-2">${q.title}</div>
              <div class="text-gray-700 text-sm mb-2">${q.desc}</div>
              <div class="flex items-center justify-between">
                  <label class="flex items-center">
                      <input type="checkbox" class="mr-2 q-select" value="${q.id}" ${checked}>
                      åŠ å…¥æœ¬æ¬¡èª²ç¨‹
                  </label>
                  <button onclick="editQ(${q.id})" class="text-blue-600 hover:underline text-sm">ç·¨è¼¯</button>
                  <button onclick="delQ(${q.id})" class="text-red-600 hover:underline text-sm">åˆªé™¤</button>
              </div>
          </div>`;
        });
      }

      function selectAll() {
        document.querySelectorAll('.q-select:not(:disabled)').forEach(cb => cb.checked = true);
      }
      function addToModule() {
        document.querySelectorAll('.q-select:checked').forEach(cb => {
          const id = parseInt(cb.value);
          if (!moduleQuestions.includes(id)) moduleQuestions.push(id);
        });
        renderQuestions();
        renderModule();
      }
      function renderModule() {
        const el = document.getElementById('moduleList');
        el.innerHTML = '';
        moduleQuestions.forEach(id => {
          const q = questions.find(x => x.id === id);
          el.innerHTML += `
              <div class="bg-white rounded shadow p-3 flex justify-between items-center">
                  <div>
                      <span class="badge badge-hot">ğŸ”¥${q.popularity}</span>
                      <span class="font-bold">${q.title}</span>
                      <span class="text-sm text-gray-500 ml-2">#${q.topic}</span>
                      <span class="badge ${q.risk === 'high' ? 'badge-risk-high' : q.risk === 'medium' ? 'badge-risk-medium' : 'badge-risk-low'} ml-2">${q.risk === 'high' ? 'é«˜é¢¨éšª' : q.risk === 'medium' ? 'ä¸­é¢¨éšª' : 'ä½é¢¨éšª'}</span>
                  </div>
                  <button onclick="removeFromModule(${id})" class="text-red-500 hover:underline">ç§»é™¤</button>
              </div>`;
        });
      }
      function removeFromModule(id) {
        moduleQuestions = moduleQuestions.filter(qid => qid !== id);
        renderQuestions();
        renderModule();
      }
      // ç·¨è¼¯/åˆªé™¤ï¼ˆåƒ…DEMOï¼‰
      function editQ(id) { alert("ç·¨è¼¯é¡Œç›®ï¼š" + id); }
      function delQ(id) {
        if (confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) {
          // è‹¥æƒ³åŒæ­¥å¾Œç«¯è«‹å¯«API
          let idx = questions.findIndex(q => q.id === id);
          if (idx > -1) questions.splice(idx, 1);
          renderQuestions();
          renderModule();
        }
      }

      // ç¯©é¸äº‹ä»¶
      document.addEventListener('DOMContentLoaded', () => {
        renderQuestions();
        document.getElementById('riskFilter').addEventListener('change', renderQuestions);
        document.getElementById('popularityFilter').addEventListener('change', renderQuestions);
      });
    </script>
</body>

</html>